pico-8 cartridge // http://www.pico-8.com
version 43
__lua__
#include oop/class.lua
#include oop/enums.lua
#include animation/particles.lua
#include entities/particle_trail.lua
#include entities/dust.lua
#include entities/paddle.lua
#include entities/ball.lua
#include main.lua

-- allows for async functionality using cocreate and coresume --
routines = {}

function async(fn)
    add(routines, cocreate(fn))
end
---

function _init()
    game:build(ball, player_paddle, enemy_paddle)
end

function _update()
    game:update()
end

function _draw()
    cls(1)
    map()

    -- update and draw any active animation routines
    for routine in all(routines) do
        if costatus(routine) == "dead" then
            del(routines, routine)
        else
            coresume(routine)
        end
    end

    if game.state == game_states.start then
        game:draw_start_screen()
    elseif game.state == game_states.done then
        game:draw_game_over_screen()
    else
        game:draw_elements()
    end
end
__gfx__
0000000000000000311131310000000050005050d00d000dd000d0d00d0dd00d0000000000000000000000000000000000000000000000000000000000000000
00000000000000001311113100000000050000500d00000d0d0000d00d000d000000000000000000000000000000000000000000000000000000000000000000
00700700000000001113131100000000000505000d000d0d000d0d00d000d0d00000000000000000000000000000000000000000000000000000000000000000
0007700000000000113111130000000000500005dd0000d000d0000d00d000000000000000000000000000000000000000000000000000000000000000000000
0007700000800000131131110000000005005000000000d00d00d0000d00d00d0000000000000000000000000000000000000000000000000000000000000000
00700700000080003113313100000000500550500d000d0dd00dd0d0000d00d00000000000000000000000000000000000000000000000000000000000000000
000000000808008031311111000000005050000000d00000d0d000000d00d0d00000000000000000000000000000000000000000000000000000000000000000
00000000808888081311131100000000050005000d00d00d0d000d00d00d00d00000000000000000000000000000000000000000000000000000000000000000
00ff9f00888888883111313100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0ffff990689999861311113100000000009999999999999999999999999999999999999900000000000000000000000000000000000000000000000000000000
ff9f9f99666336661113131100000000009988888888888888888888888888888888888900000000000000000000000000000000000000000000000000000000
9ff9f999444444441131111300000000099888888888888888888888888888888888889900000000000000000000000000000000000000000000000000000000
f99f999949a9a9941311311100000000998888888888888888888888888888888888889900000000000000000000000000000000000000000000000000000000
fff999994a9a99943113313100000000988888888888888888888888888888888888899000000000000000000000000000000000000000000000000000000000
099999904aa9a9943131111100000000999999999999999999999999999999999999990000000000000000000000000000000000000000000000000000000000
009999004aaa9a941311131100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00d00d004aaa9a943111313100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0dedded04aaaa9941311113100000000009999999999999999999999999999999999999900000000000000000000000000000000000000000000000000000000
deeeeeed4aaaa9941113131100000000009900000000000000000000000000000000000900000000000000000000000000000000000000000000000000000000
deeeeeed4aaaaa941131111300000000099000000000000000000000000000000000009900000000000000000000000000000000000000000000000000000000
0deeeed0444444441311311100000000990000000000000000000000000000000000009900000000000000000000000000000000000000000000000000000000
00deed00666336663113313100000000900000000000000000000000000000000000099000000000000000000000000000000000000000000000000000000000
000dd000689999863131111100000000999999999999999999999999999999999999990000000000000000000000000000000000000000000000000000000000
00000000181111811311131100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000333333330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000003bb28bb30000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000003b2228b30000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000328382830000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000328382830000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000003b2228b30000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000003bb28bb30000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000333333330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000888888000000000000000000000000000000000ddd111111fff1fff1ffffffffff1fff1000000000000000000000000000000000000000000000000
000000000080080800000000000000000000000000000000ddd111111ffffff1ff1ffffffff1ff11000000000000000000000000000000000000000000000000
000000008000808000000000000000000000000000000000dddd1111ff111f11ffff551111ff1f11000000000000000000000000000000000000000000000000
000000000080000000000000000000000000000000000000dddd1111f11f1f11155555511111fff1000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000011ddd11fffffff1155551555551111f1000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000111111111111115555551111151111f1000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000011111111111155555555111115551111000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000011111111111555555550511111151111000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000011111111115555555555551155151111000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000011111111115555555555551115551111000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000011111111155555555555511115551111000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000011111111155555555511111155555111000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000011111111155555551111111551155111000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000dd111111155555551111111511155111000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000dd111111155555555111115511155111000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000ddd11111155555555555155511155511000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000dddd1111115555555555155551155551000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000dd1d1111111555555555555555155551000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000dd1dd111111155555555555555155555000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000dd1dd111111155555555515111115555000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000dddd1111111115555555511111155555000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000ddd11111111115555555111511155555000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000ddd11111111155555555115511555555000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000d1111111115555555551155511555555000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000011111111155115555511155555555555000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000011111111551111555111155555555555000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000011111111551511111115555555555555000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000011111111155555111115555555555551000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000011111111155555551115555555555551000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000011111111115555555555555555555511000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000011111111555555555555555555555511000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000011111155555555555555555555555551000000000000000000000000000000000000000000000000
__gff__
0000000000000000000000000000000000000000010204081000000000000000000000000102020210000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0400000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0400000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0400000000000000000000000000000700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0400000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0400000000000000000000000000000700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0400000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0400000000000000000000000000000700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0400000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0400000000000000000000000000000700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0400000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0400000000000000000000000000000700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0400000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0400000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0400000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0400000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0400000000000000000000000000000700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0400000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
